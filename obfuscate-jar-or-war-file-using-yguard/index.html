<!doctype html><html lang=hi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto:ital,wdth,wght@0,75..100,100..900;1,75..100,100..900&display=swap" rel=stylesheet><link rel=stylesheet href=https://csetutorials.com/scss/main.min.css><title>How to obfuscate jar or war file using yguard</title>
<meta name=description content="Obfuscate java code, jar or war files using yguard ant maven project. code obfuscation tool"><meta name=author content="Ashish Doneriya"><meta name=robots content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><link rel=canonical href=https://csetutorials.com/obfuscate-jar-or-war-file-using-yguard/><meta property="og:type" content="article"><meta property="og:title" content="How to obfuscate jar or war file using yguard"><meta property="og:description" content="Obfuscate java code, jar or war files using yguard ant maven project. code obfuscation tool"><meta property="og:url" content="https://csetutorials.com/obfuscate-jar-or-war-file-using-yguard/"><meta property="og:site_name" content="Cse Tutorials"><meta property="article:published_time" content="2016-09-20T08:15:24+05:30"><meta property="article:modified_time" content="2016-09-20T12:12:38+05:30"><meta property="article:author" content="Ashish Doneriya"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="How to obfuscate jar or war file using yguard"><meta name=twitter:description content="Obfuscate java code, jar or war files using yguard ant maven project. code obfuscation tool"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"How to obfuscate jar or war file using yguard","description":"Obfuscate java code, jar or war files using yguard ant maven project. code obfuscation tool","author":{"@type":"Person","name":"Ashish Doneriya"},"keywords":[],"articleSection":["\"%!s(MISSING)\", \"%!s(MISSING)\""],"datePublished":"2016-09-20T08:15:24\u002b05:30","dateModified":"2016-09-20T12:12:38\u002b05:30","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/csetutorials.com\/obfuscate-jar-or-war-file-using-yguard\/"},"url":"https:\/\/csetutorials.com\/obfuscate-jar-or-war-file-using-yguard\/"}</script></head><body style=background-color:#f9f9f9;font-family:roboto,sans-serif><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a class=navbar-brand href=/>Cse Tutorials</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about-us/>About us</a></li><li class=nav-item><a class=nav-link href=/contact-us/>Contact us</a></li><li class=nav-item><a class=nav-link href=/privacy-policy/>Privacy Policy</a></li><li class=nav-item><a class=nav-link href=/terms-of-service/>Terms of Service</a></li><li class=nav-item><a class=nav-link href>Topics</a></li></ul></div></div></nav><main><article class=page-wrapper><h1 class="mb-4 text-center">How to obfuscate jar or war file using yguard</h1><div class="d-flex justify-content-center align-items-center mb-4 text-muted small"><time datetime="2016-09-20 08:15:24 +0530 +0530">Sep 20, 2016</time>
<span class=mx-2>|</span>
<span>Ashish Doneriya</span>
<span class=mx-2>|</span>
<a class=text-decoration-none href=/topics/java rel=category>Java</a></div><div class=post-content><p>YGuard is a free Java bytecode obfuscator and shrinker. It is one of the best code obfuscation tools. It improves your software deployment by prohibiting undesirable access to your source code. It is free and protect code from reverse engineering. It can obfuscate Names and shrinks Code.</p><p>YGuard is an Ant Task. It means it can be run through ant. If you are using maven then you would need a plugin called <code>maven-antrun-plugin</code>. You can call ant script from pom.xml using this plugin. Here the code for calling ant script using maven.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;profile&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;id&gt;</span>yguard<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;build&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;plugins&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>maven-antrun-plugin<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>1.8<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;executions&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;execution&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;phase&gt;</span>install<span style=color:#f92672>&lt;/phase&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;target&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;ant</span> <span style=color:#a6e22e>antfile=</span><span style=color:#e6db74>&#34;build.xml&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/target&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;goals&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;goal&gt;</span>run<span style=color:#f92672>&lt;/goal&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/goals&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/execution&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/executions&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/plugin&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/plugins&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/build&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/profile&gt;</span>
</span></span></code></pre></div><p>Now lets start.</p><p>First <a href=https://www.yworks.com/downloads#yGuard target=_blank rel="noopener nofollow">download</a> the yguard jar file from its website and put it in your project directory. If its a maven project then I suggest you to put it with pom.xml file.</p><p>Create a file <code>build.xml</code> in your project directory. In maven project, put it with pom.xml.</p><h3 id=obfuscate-a-war-file>Obfuscate a war file</h3><p>There is an excellent <a href=http://codeaweso.me/2009/02/obfuscating-a-webapp-war-file-with-yguard-and-ant/ target=_blank rel="noopener nofollow">ant script</a> written by Mike Christianson. What he did in that script is</p><ol><li>Created two directories unwar.dir and obfuscation.dir</li><li>Extract the war file in unwar.dir</li><li>Created a jar of webapp classes (/WEB-INF/classes) called webapp.jar and put it in obfuscation.dir</li><li>Created jar of web.xml called web.xml.jar and put it in obfuscation.dir</li><li>Moved all the jar inside lib directory from unwar.dir/WEB-INF/lib/ to obfuscation.dir</li><li>Obfuscated all the jars inside obfuscation.dir</li><li>Put back all the jars in their respective places.</li><li>Again create the war file from unwar.dir.</li><li>That&rsquo;s it.</li></ol><p>In short, place all the jars and code together in one place, obfuscate it and then put back all in their respective places.</p><p><strong>NOTE :</strong> There can be some third party jars ( like gson) which can&rsquo;t be obfuscated (due to some class name problem). So you have to exclude those jars from being obfuscated. ie. Its better not to obfuscate third party jars.</p><h3 id=obfuscate-a-single-jar-file>Obfuscate a single jar file</h3><p>For obfuscating a single jar file, copy the below ant script and paste it in build.xml file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;project</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#39;antlib:org.apache.tools.ant&#39;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- Creating temporary directory --&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;mkdir</span> <span style=color:#a6e22e>dir=</span><span style=color:#e6db74>&#34;tempDir&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- Copy the jar file to that temporary directory--&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;copyfile</span> <span style=color:#a6e22e>src=</span><span style=color:#e6db74>&#34;jar-file-path/test-1.0.jar&#34;</span> <span style=color:#a6e22e>dest=</span><span style=color:#e6db74>&#34;tempDir/test-1.0.jar&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- creating file set of jars (that contains our jar file and all other jars that uses this jar)--&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;fileset</span> <span style=color:#a6e22e>dir=</span><span style=color:#e6db74>&#34;tempDir&#34;</span> <span style=color:#a6e22e>includes=</span><span style=color:#e6db74>&#34;*.jar&#34;</span> <span style=color:#a6e22e>id=</span><span style=color:#e6db74>&#34;jars.to.be.obfuscated&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;taskdef</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;yguard&#34;</span> <span style=color:#a6e22e>classname=</span><span style=color:#e6db74>&#34;com.yworks.yguard.YGuardTask&#34;</span> <span style=color:#a6e22e>classpath=</span><span style=color:#e6db74>&#34;yguard.jar&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- start the obfuscation --&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;yguard&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;inoutpairs&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;fileset</span> <span style=color:#a6e22e>refid=</span><span style=color:#e6db74>&#34;jars.to.be.obfuscated&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/inoutpairs&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;rename&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;keep&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>&lt;!-- Preventing the below class and methods from obfuscation --&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;class</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;com.csetutorials.Test&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;method</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;com.csetutorials.Test&#34;</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;void main(java.lang.String[])&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;class</span> <span style=color:#a6e22e>classes=</span><span style=color:#e6db74>&#34;private&#34;</span> <span style=color:#a6e22e>methods=</span><span style=color:#e6db74>&#34;private&#34;</span> <span style=color:#a6e22e>fields=</span><span style=color:#e6db74>&#34;private&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;patternset&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;include</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;com.csetutorials.beans.**&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;include</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;com.csetutorials.beans.*&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;/patternset&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/class&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;/keep&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/rename&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/yguard&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- Obfuscation completed --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- Delete our main jar file --&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;delete</span> <span style=color:#a6e22e>file=</span><span style=color:#e6db74>&#34;jar-file-path/test-1.0.jar&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- Copy the obfuscated jar file--&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;copy</span> <span style=color:#a6e22e>todir=</span><span style=color:#e6db74>&#34;jar-file-path/&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;fileset</span> <span style=color:#a6e22e>dir=</span><span style=color:#e6db74>&#34;tempDir&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;globmapper</span> <span style=color:#a6e22e>from=</span><span style=color:#e6db74>&#34;*_obf.jar&#34;</span> <span style=color:#a6e22e>to=</span><span style=color:#e6db74>&#34;*.jar&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/copy&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>&lt;!-- Delete temporary directory --&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;delete</span> <span style=color:#a6e22e>dir=</span><span style=color:#e6db74>&#34;tempDir&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/project&gt;</span>
</span></span></code></pre></div><p>I think the script is self explanatory. You can do changes according to your requirements.</p></div></article></main><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js defer></script></body></html>