<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAAdUlEQVR4Ae3MIRJAUBCH8e81R3AO53AmvIQmu5MzqE8iKoZAEdZYZhT7/cuGnR9/yeEJrDcW8DjEKlbFasQmFTQitj+cK2TqO8ggg2LceygiZ6YjeQel9Me10NI8ghR7DhlkkEFBxQTEShVUcVHGcAsZ8PylDecfc51kCzSlAAAAAElFTkSuQmCC type=image/x-icon><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wdth,wght@0,75..100,100..900;1,75..100,100..900&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel=stylesheet><link rel=stylesheet href=https://csetutorials.com/scss/main.min.css><title>SSTable Architecture Summary</title>
<meta name=description content="Overview of Sorted String Table Architecture"><meta name=author content="Ashish Doneriya"><meta name=robots content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><link rel=canonical href=https://csetutorials.com/sstable-architecture.html><meta property="og:type" content="article"><meta property="og:title" content="SSTable Architecture Summary"><meta property="og:description" content="Overview of Sorted String Table Architecture"><meta property="og:url" content="https://csetutorials.com/sstable-architecture.html"><meta property="og:site_name" content="Cse Tutorials"><meta property="article:published_time" content="2021-03-10T10:38:50+05:30"><meta property="article:modified_time" content="2022-05-03T09:22:32+05:30"><meta property="article:author" content="Ashish Doneriya"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="SSTable Architecture Summary"><meta name=twitter:description content="Overview of Sorted String Table Architecture"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"SSTable Architecture Summary","description":"Overview of Sorted String Table Architecture","author":{"@type":"Person","name":"Ashish Doneriya"},"keywords":[],"articleSection":["\"%!s(MISSING)\""],"datePublished":"2021-03-10T10:38:50\u002b05:30","dateModified":"2022-05-03T09:22:32\u002b05:30","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/csetutorials.com\/sstable-architecture.html"},"url":"https:\/\/csetutorials.com\/sstable-architecture.html"}</script></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a class=navbar-brand href=/>Cse Tutorials</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about-us/>About us</a></li><li class=nav-item><a class=nav-link href=/contact-us/>Contact us</a></li><li class=nav-item><a class=nav-link href=/privacy-policy/>Privacy Policy</a></li><li class=nav-item><a class=nav-link href=/terms-of-service/>Terms of Service</a></li><li class=nav-item><a class=nav-link href=/topics/>Topics</a></li></ul></div></div></nav><main><article class=page-wrapper><h1 class="mb-4 text-center">SSTable Architecture Summary</h1><div class="d-flex justify-content-center align-items-center mb-4 text-muted small"><time datetime="2021-03-10 10:38:50 +0530 +0530">Mar 10, 2021</time>
<span class=mx-2>|</span>
<span>Ashish Doneriya</span>
<span class=mx-2>|</span>
<a class=text-decoration-none href=/topics/system-design rel=category>System Design</a></div><div class=post-content><h2 id=key-points>Key Points</h2><ol><li>SSTable or Sorted String Table is used to store key values.</li><li>In SSTables, key-value pairs are written in sorted order in disk.</li><li>For faster access to value of a key, indexes are maintained for SSTable. Lets call it SSIndex.</li><li>We keep copy of SSIndex in RAM for faster access.</li><li>There is a special property of SSTable that is they are immutable. It means we cannot append or delete data to SSTable so as to maintain sorting order and read speed.</li><li>If we cannot modify the sstable then we have to overwrite the sstable if we want to modify the data. But if we do that then the data write speed would be very-very slow.</li><li>To counter this problem we maitain a table known as MemTable in RAM (as we know that writing data in RAM is very fast).</li><li>If we have to write data then we would write data in MemTable.</li><li>If we have to read data then first we would check memtable for that record. If record is not available then we would search into sstable.</li><li>If we have to delete data then we mark the record as deleted using a flag or something like that in memtable. This is because lets say if you completely delete the record from memtable and if a search query comes up for that record then in this case it would check both memtable and sstable. But if we mark that record as deleted in memtable then the user won&rsquo;t have to search sstable also.</li><li>Periodically we flush the memtable to disk.</li><li>There is drawback in this approach. In case of unexpected system crash or shutdown the data in memtable will be lost. Therefore for recovery purpose we write every data write or delete request in a log file.</li></ol><h2 id=why-we-maintain-sorting-order-in-sstable->Why we maintain sorting order in SSTable ?</h2><p>As I told in the above points that we keep the index of sstable in ram. What if there are billions of record. In this case RAM won&rsquo;t be able to hold all the keys.</p><p>To counter this problem what we would do is that we would not store all the keys in index. Lets say there are 10 keys from 1 to 10. In RAM index we will save 1, 5. So if the user requests to fetch value for key 8, then in index we check a key which is just less than 8 that is 5. Now from key 5 to the next key that is 10, we search our key (8).</p><p><strong>Sources :</strong></p><ul><li><a href=https://medium.com/swlh/log-structured-merge-trees-9c8e2bea89e8 target=_blank rel="noopener nofollow">https://medium.com/swlh/log-structured-merge-trees-9c8e2bea89e8</a></li><li><a href=https://www.igvita.com/2012/02/06/sstable-and-log-structured-storage-leveldb/ target=_blank rel="noopener nofollow">https://www.igvita.com/2012/02/06/sstable-and-log-structured-storage-leveldb/</a></li><li><a href=https://dev.to/codingblocks/designing-data-intensive-applications-sstables-and-lsm-trees target=_blank rel="noopener nofollow">https://dev.to/codingblocks/designing-data-intensive-applications-sstables-and-lsm-trees</a></li></ul><p><strong>Read More :</strong></p><ul><li><a href=https://blog.yugabyte.com/a-busy-developers-guide-to-database-storage-engines-the-basics/ target=_blank rel="noopener nofollow">https://blog.yugabyte.com/a-busy-developers-guide-to-database-storage-engines-the-basics/</a></li><li>Compaction strategies for SSTable.</li></ul></div></article></main><script async src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js defer></script></body></html>