<!doctype html><html lang=hi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xFIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xMIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xEIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xLIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto:ital,wdth,wght@0,75..100,100..900;1,75..100,100..900&display=swap" rel=stylesheet><link rel=stylesheet href=https://csetutorials.com/scss/main.min.css><title>URL Shortener System Design</title>
<meta name=description content="URL Shortener system design key points to remember"><meta name=author content="Ashish Doneriya"><meta name=robots content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><link rel=canonical href=https://csetutorials.com/url-shortener-system-design.html><meta property="og:type" content="article"><meta property="og:title" content="URL Shortener System Design"><meta property="og:description" content="URL Shortener system design key points to remember"><meta property="og:url" content="https://csetutorials.com/url-shortener-system-design.html"><meta property="og:site_name" content="Cse Tutorials"><meta property="article:published_time" content="2021-03-29T10:36:23+05:30"><meta property="article:modified_time" content="2021-03-29T10:36:23+05:30"><meta property="article:author" content="Ashish Doneriya"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="URL Shortener System Design"><meta name=twitter:description content="URL Shortener system design key points to remember"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"URL Shortener System Design","description":"URL Shortener system design key points to remember","author":{"@type":"Person","name":"Ashish Doneriya"},"keywords":[],"articleSection":["\"%!s(MISSING)\""],"datePublished":"2021-03-29T10:36:23\u002b05:30","dateModified":"2021-03-29T10:36:23\u002b05:30","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/csetutorials.com\/url-shortener-system-design.html"},"url":"https:\/\/csetutorials.com\/url-shortener-system-design.html"}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-VQ66771MZZ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VQ66771MZZ")</script></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a class=navbar-brand href=/>Cse Tutorials</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about-us/>About us</a></li><li class=nav-item><a class=nav-link href=/contact-us/>Contact us</a></li><li class=nav-item><a class=nav-link href=/privacy-policy/>Privacy Policy</a></li><li class=nav-item><a class=nav-link href=/terms-of-service/>Terms of Service</a></li><li class=nav-item><a class=nav-link href=/topics/>Topics</a></li></ul></div></div></nav><main><article class=page-wrapper><h1 class="mb-4 text-center">URL Shortener System Design</h1><div class="d-flex justify-content-center align-items-center mb-4 text-muted small"><time datetime="2021-03-29 10:36:23 +0530 +0530">Mar 29, 2021</time>
<span class=mx-2>|</span>
<span>Ashish Doneriya</span>
<span class=mx-2>|</span>
<a class=text-decoration-none href=/topics/system-design rel=category>System Design</a></div><div class=post-content><h3 id=requirements>Requirements</h3><ul><li>100 million writes per day ie. 100 million urls would be shortened per day.</li><li>Only alphanumeric characters are allowed in the shortened URL.</li><li>The system should be highly available, scalable and fault tolerance.</li></ul><h3 id=estimations>Estimations</h3><ul><li><strong>Write operations :</strong> 100 million. It means 100000000/(24 * 3600) = 1158 writes per second.</li><li><strong>Read operations :</strong> Lets say the read operations are 10 times of write operations that is 11580 reads per second.</li><li>Lets suppose the service would run for 10 years. It means we would need around 40 TB of storage.</li></ul><h3 id=components-of-the-system>Components of the system</h3><ul><li>Key-Value database</li><li>Webservers</li><li>Load Balancers</li><li>Cache Service</li></ul><h3 id=data-flow>Data Flow</h3><h3 id=summary>Summary</h3><p>First the user goes to the shortener website and send post request to the website&rsquo;s server. The webserver creates a short code for that url and in the key value database it save the short code as key and the complete url as a val. If we want the complete url for a short url, then in this case, the user fires a get request to the webserver, the webserver fetches the shortcode value from the key-value db. After getting the complete url, the server would redirect the user to the actual url (301 or 302 depends on the scenario.).</p><h4 id=details>Details</h4><ol><li>First the user would go to the shortener website. After that he would submit post request to the website for url shortening using some form in the site.</li><li>Then the request would hit the load balancer. The load balancer would send the request to a webserver.</li><li>To short a url, there are two techniques. One is directly create a hash using a hash function. For the the hash value length must be atleast of 7 digits to satisfy out requirement (365 billion urls). After that we would store the hash key and full url as a key-value pair in key-value database. In case of collison add some value of url and check again.</li><li>The another way to generate the hash is first get a unique id using <a href=/unique-id-generator-system-design.html>unique id generator</a> and then encode using base62. After that save it in key-value database.</li><li>Both the above approaches have advantage and drawback. In the first approach there could be collison and in the second we need a unique id generator.</li><li>After generating a shortcode and saving the complete url in the database, we would show the short url to user (eg. https://your-website/short-code)</li><li>If another user wants to go to the original url using the shortcode, then at first the another user would hit the url to the browser. After that the request would go to the server. Then the server would geneate the key and fetch the value from the key-value database.</li><li>After that the server would send 301 permanent redirect request to the user containing original url. If we want to store the number of hits a particular url would receive, then the server would send 302 temporary redirect. The difference between 301 and 302 is the the browers save the 301 reponse in the cache but in case of 302 they don&rsquo;t.</li></ol><h4 id=key-value-storage-consistency><a href=/key-value-storage-design-architecture.html>Key Value Storage Consistency</a></h4><p>In this approach, W = N and R = 1. Here W = write quorum, R = read quorum and N = number of replicas. Kindly read my <a href=/key-value-storage-design-architecture.html>previous post</a> for more details related to this.</p><h4 id=analytics>Analytics</h4><p>If you want to store the statistics also then you can use the same key-value db for storing analytics data.</p></div></article></main><script async src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js defer></script></body></html>