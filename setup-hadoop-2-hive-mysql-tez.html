<!doctype html><html lang=hi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAQAAABLCVATAAAAdUlEQVR4Ae3MIRJAUBCH8e81R3AO53AmvIQmu5MzqE8iKoZAEdZYZhT7/cuGnR9/yeEJrDcW8DjEKlbFasQmFTQitj+cK2TqO8ggg2LceygiZ6YjeQel9Me10NI8ghR7DhlkkEFBxQTEShVUcVHGcAsZ8PylDecfc51kCzSlAAAAAElFTkSuQmCC type=image/x-icon><link rel=preload href=https://csetutorials.com/fonts/Roboto.ttf as=font type=font/ttf crossorigin=anonymous><link rel=preload href=https://csetutorials.com/fonts/RobotoMono.ttf as=font type=font/ttf crossorigin=anonymous><link rel=preload href=https://csetutorials.com/fonts/Roboto-Italic.ttf as=font type=font/ttf crossorigin=anonymous><link rel=preload href=https://csetutorials.com/fonts/RobotoMono-Italic.ttf as=font type=font/ttf crossorigin=anonymous><link rel=stylesheet href=https://csetutorials.com/scss/main.min.css><title>How to setup Single Node Hive on Tez Hadoop Cluster</title>
<meta name=description content="Steps to setup Hadoop 2, Hive 2.1.1, Hive with Mysql, Tez and Tez UI on Single Node"><meta name=author content="Ashish Doneriya"><meta name=robots content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><link rel=canonical href=https://csetutorials.com/setup-hadoop-2-hive-mysql-tez.html><meta property="og:type" content="article"><meta property="og:title" content="How to setup Single Node Hive on Tez Hadoop Cluster"><meta property="og:description" content="Steps to setup Hadoop 2, Hive 2.1.1, Hive with Mysql, Tez and Tez UI on Single Node"><meta name=keywords content="hadoop,hive,mysql,tez"><meta property="og:url" content="https://csetutorials.com/setup-hadoop-2-hive-mysql-tez.html"><meta property="og:site_name" content="Cse Tutorials"><meta property="article:published_time" content="2020-04-28T08:11:36+05:30"><meta property="article:modified_time" content="2020-04-28T08:11:36+05:30"><meta property="article:author" content="Ashish Doneriya"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="How to setup Single Node Hive on Tez Hadoop Cluster"><meta name=twitter:description content="Steps to setup Hadoop 2, Hive 2.1.1, Hive with Mysql, Tez and Tez UI on Single Node"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"How to setup Single Node Hive on Tez Hadoop Cluster","description":"Steps to setup Hadoop 2, Hive 2.1.1, Hive with Mysql, Tez and Tez UI on Single Node","author":{"@type":"Person","name":"Ashish Doneriya"},"keywords":["\"%!s(MISSING)\", \"%!s(MISSING)\", \"%!s(MISSING)\", \"%!s(MISSING)\""],"articleSection":["\"%!s(MISSING)\""],"datePublished":"2020-04-28T08:11:36\u002b05:30","dateModified":"2020-04-28T08:11:36\u002b05:30","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/csetutorials.com\/setup-hadoop-2-hive-mysql-tez.html"},"url":"https:\/\/csetutorials.com\/setup-hadoop-2-hive-mysql-tez.html"}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-VQ66771MZZ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VQ66771MZZ")</script></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a class=navbar-brand href=/>Cse Tutorials</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about-us/>About us</a></li><li class=nav-item><a class=nav-link href=/contact-us/>Contact us</a></li><li class=nav-item><a class=nav-link href=/privacy-policy/>Privacy Policy</a></li><li class=nav-item><a class=nav-link href=/terms-of-service/>Terms of Service</a></li><li class=nav-item><a class=nav-link href=/topics/>Topics</a></li></ul></div></div></nav><main><article class=page-wrapper><h1 class="mb-4 text-center">How to setup Single Node Hive on Tez Hadoop Cluster</h1><div class="d-flex justify-content-center align-items-center mb-4 text-muted small"><time datetime="2020-04-28 08:11:36 +0530 +0530">Apr 28, 2020</time>
<span class=mx-2>|</span>
<span>Ashish Doneriya</span>
<span class=mx-2>|</span>
<a class=text-decoration-none href=/topics/big-data rel=category>Big Data</a></div><div class=post-content><p>In this tutorial I&rsquo;m going to show you how setup single node Hadoop cluster with hive and tez. We are going to use the following versions -</p><p>Hadoop - 2.7.2<br>Hive - 2.1.1<br>Tez - 0.9.2</p><h2 id=preriquisites->Preriquisites :</h2><ol><li><p><strong>Java 8 must be installed and set <code>JAVA_HOME</code> path.</strong>
If you are using ubuntu then you can install java by using the below command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install openjdk-8-jdk
</span></span></code></pre></div><p>After that you can set <code>JAVA_HOME</code> path by adding the below line in <code>.bashrc</code> file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export JAVA_HOME<span style=color:#f92672>=</span>/usr/lib/jvm/java-8-openjdk-amd64
</span></span></code></pre></div><p>The <code>.bashrc</code> file is located in your home directory. It is a hidden file. In ubuntu you can view hidden files by using <code>Ctrl</code> <code>+</code> <code>H</code> shortcut.</p></li><li><p><strong>Passwordless ssh must be set</strong></p><p>To set up passwordless ssh you can follow my previous article to <a href=/passwordless-ssh-ubuntu-linux.html>setup ssh</a>.</p></li><li><p><strong>Mysql server must be installed</strong></p><p>MySql is necessary for hive setup. If you just want to setup hadoop and not hive then you can skip this step. In ubuntu mysql can be setup using the below command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt install mysql-server
</span></span></code></pre></div></li></ol><h2 id=setup-hadoop>Setup Hadoop</h2><ol><li><p>Create a directory called packages in your home directory</p></li><li><p>Download <a href=https://archive.apache.org/dist/hadoop/core/hadoop-2.7.2/hadoop-2.7.2.tar.gz target=_blank rel="noopener nofollow">Hadoop binary</a> and extract to packages/hadoop</p></li><li><p>In <code>packages/hadoop/etc/hadoop</code> directory replace <code>core-site.xml</code>, <code>hdfs-site.xml</code>, <code>mapred-site.xml</code> and <code>yarn-site.xml</code> with the following content. <strong>Don&rsquo;t forget</strong> to change your hostname and username</p><p><strong><code>core-site.xml</code></strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;?xml-stylesheet type=&#34;text/xsl&#34; href=&#34;configuration.xsl&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>fs.default.name<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>hdfs://hostname:9000<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>hadoop.tmp.dir<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>/home/username/packages/hadoop/tmp<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>hadoop.http.staticuser.user<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>username<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>hadoop.proxyuser.username.groups<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>*<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>hadoop.proxyuser.username.hosts<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>*<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span></code></pre></div><p><strong><code>hdfs-site.xml</code></strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;?xml-stylesheet type=&#34;text/xsl&#34; href=&#34;configuration.xsl&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>dfs.replication<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>1<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>dfs.name.dir<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>file:///home/username/packages/hadoop/hdfs/namenode<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>dfs.data.dir<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>file:///home/username/packages/hadoop/hdfs/datanode<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span></code></pre></div><p><strong><code>mapred-site.xml</code></strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>mapreduce.framework.name<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>yarn<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span></code></pre></div><p><strong><code>yarn-site.xml</code></strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>yarn.nodemanager.aux-services<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>mapreduce_shuffle<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>yarn.timeline-service.enabled<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>true<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>yarn.resourcemanager.system-metrics-publisher.enabled<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>true<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>yarn.timeline-service.http-cross-origin.enabled<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>true<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>yarn.timeline-service.hostname<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>hostname<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>yarn.nodemanager.vmem-check-enabled<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>false<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>yarn.nodemanager.vmem-pmem-ratio<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>4<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>yarn.acl.enable<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>false<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>yarn.resourcemanager.system-metrics-publisher.enabled<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>true<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>yarn.timeline-service.generic-application-history.enabled<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>true<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span></code></pre></div></li><li><p>Along with these xml files there is a file hadoop-env.sh in <code>packages/hadoop/etc/hadoop/</code> directory. Open that file and find the line that starts with export JAVA_HOME=. Replace that line with the following</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export JAVA_HOME<span style=color:#f92672>=</span>/usr/lib/jvm/java-8-openjdk-amd64
</span></span></code></pre></div></li><li><p>Add the below content to .bashrc file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export PACKAGES<span style=color:#f92672>=</span>$HOME/packages
</span></span><span style=display:flex><span>export HADOOP_HOME<span style=color:#f92672>=</span>$PACKAGES/hadoop
</span></span><span style=display:flex><span>export HADOOP_ROOT<span style=color:#f92672>=</span>$HADOOP_HOME
</span></span><span style=display:flex><span>export HADOOP_BIN_PATH<span style=color:#f92672>=</span>$HADOOP_HOME/bin
</span></span><span style=display:flex><span>export HADOOP_LIBEXEC_DIR<span style=color:#f92672>=</span>$HADOOP_HOME/libexec
</span></span><span style=display:flex><span>export HADOOP_MAPRED_HOME<span style=color:#f92672>=</span>$HADOOP_HOME
</span></span><span style=display:flex><span>export HADOOP_COMMON_HOME<span style=color:#f92672>=</span>$HADOOP_HOME
</span></span><span style=display:flex><span>export PACKAGES<span style=color:#f92672>=</span>$HOME/packages
</span></span><span style=display:flex><span>export HADOOP_HDFS_HOME<span style=color:#f92672>=</span>$HADOOP_HOME
</span></span><span style=display:flex><span>export YARN_HOME<span style=color:#f92672>=</span>$HADOOP_HOME
</span></span><span style=display:flex><span>export HADOOP_COMMON_LIB_NATIVE_DIR<span style=color:#f92672>=</span>$HADOOP_HOME/lib/native
</span></span><span style=display:flex><span>export PATH<span style=color:#f92672>=</span>$PATH:$HADOOP_HOME/sbin:$HADOOP_HOME/bin
</span></span><span style=display:flex><span>export HADOOP_INSTALL<span style=color:#f92672>=</span>$HADOOP_HOME
</span></span><span style=display:flex><span>export HADOOP_CONF_DIR<span style=color:#f92672>=</span>$HADOOP_HOME/etc/hadoop
</span></span></code></pre></div></li><li><p>Now execute below command to format namenode</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hadoop namenode -format
</span></span></code></pre></div></li><li><p>Your hadoop has been set up. To start hadoop services</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>start-dfs.sh
</span></span><span style=display:flex><span>start-yarn.sh
</span></span><span style=display:flex><span>mr-jobhistory-daemon.sh start historyserver
</span></span><span style=display:flex><span>yarn-daemon.sh start historyserver
</span></span></code></pre></div></li><li><p>To test whether it has been setup, you can execute the below commands</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hdfs dfs -mkdir /testdir
</span></span><span style=display:flex><span>hdfs dfs -ls /
</span></span></code></pre></div></li><li><p>You can view hdfs ui by opening the url <code>http://localhost:50070</code> and can view resource manager ui using <code>http://localhost:8088</code></p></li></ol><h2 id=setup-hive>Setup Hive</h2><ol><li><p>Download <a href=https://archive.apache.org/dist/hive/hive-2.1.1/apache-hive-2.1.1-bin.tar.gz target=_blank rel="noopener nofollow">Hive binary</a> and extract to packages/hive</p></li><li><p>Now to setup hive for mysql, create file <code>hive-site.xml</code> in <code>packages/hive/conf</code> directory and put the below content. Don&rsquo;t forget to change the values according to your requirements (hostname, mysql username, mysql password and mysql database).</p><p>If you do not know how to create mysql user or database, then for ubuntu execute the below commands (don&rsquo;t forget to change your name here) -</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mysql
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>CREATE USER <span style=color:#e6db74>&#39;ashish&#39;</span>@<span style=color:#e6db74>&#39;%&#39;</span> identified by <span style=color:#e6db74>&#39;thisismypassword&#39;</span>;
</span></span><span style=display:flex><span>CREATE USER <span style=color:#e6db74>&#39;ashish&#39;</span>@<span style=color:#e6db74>&#39;localhost&#39;</span> identified by <span style=color:#e6db74>&#39;thisismypassword&#39;</span>;
</span></span><span style=display:flex><span>CREATE DATABASE hive;
</span></span><span style=display:flex><span>GRANT ALL PRIVILEGES ON hive.* TO <span style=color:#e6db74>&#39;ashish&#39;</span>@<span style=color:#e6db74>&#39;%&#39;</span>;
</span></span><span style=display:flex><span>GRANT ALL PRIVILEGES ON hive.* TO <span style=color:#e6db74>&#39;ashish&#39;</span>@<span style=color:#e6db74>&#39;localhost&#39;</span>;
</span></span></code></pre></div><p><strong><code>hive-site.xml</code></strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;name&gt;</span>javax.jdo.option.ConnectionURL<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;value&gt;</span>jdbc:mysql://hostname/hive2<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;description&gt;</span>metadata is stored in a MySQL server<span style=color:#f92672>&lt;/description&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;name&gt;</span>javax.jdo.option.ConnectionDriverName<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;value&gt;</span>com.mysql.cj.jdbc.Driver<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;description&gt;</span>MySQL JDBC driver class<span style=color:#f92672>&lt;/description&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;name&gt;</span>javax.jdo.option.ConnectionUserName<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;value&gt;</span>ashish<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;description&gt;</span>user name for connecting to mysql server<span style=color:#f92672>&lt;/description&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;name&gt;</span>javax.jdo.option.ConnectionPassword<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;value&gt;</span>thisismypassword<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;description&gt;</span>password for connecting to mysql server<span style=color:#f92672>&lt;/description&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;name&gt;</span>hive.server2.enable.doAs<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;value&gt;</span>false<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;name&gt;</span>hive.exec.pre.hooks<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;value&gt;</span>org.apache.hadoop.hive.ql.hooks.ATSHook<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;name&gt;</span>hive.exec.post.hooks<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;value&gt;</span>org.apache.hadoop.hive.ql.hooks.ATSHook<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;name&gt;</span>hive.exec.failure.hooks<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>&lt;value&gt;</span>org.apache.hadoop.hive.ql.hooks.ATSHook<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span></code></pre></div></li><li><p>Open mysql (<code>mysql -uashish -pthisismypassword</code>) and execute the below commands</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>use hive
</span></span><span style=display:flex><span><span style=color:#66d9ef>source</span> <span style=color:#f92672>/</span>home<span style=color:#f92672>/</span>username<span style=color:#f92672>/</span>packages<span style=color:#f92672>/</span>hive<span style=color:#f92672>/</span>scripts<span style=color:#f92672>/</span>metastore<span style=color:#f92672>/</span>upgrade<span style=color:#f92672>/</span>mysql<span style=color:#f92672>/</span>hive<span style=color:#f92672>-</span><span style=color:#66d9ef>schema</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>.<span style=color:#ae81ff>1</span>.<span style=color:#ae81ff>0</span>.mysql.<span style=color:#66d9ef>sql</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>source</span> <span style=color:#f92672>/</span>home<span style=color:#f92672>/</span>username<span style=color:#f92672>/</span>packages<span style=color:#f92672>/</span>hive<span style=color:#f92672>/</span>scripts<span style=color:#f92672>/</span>metastore<span style=color:#f92672>/</span>upgrade<span style=color:#f92672>/</span>mysql<span style=color:#f92672>/</span>hive<span style=color:#f92672>-</span>txn<span style=color:#f92672>-</span><span style=color:#66d9ef>schema</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>.<span style=color:#ae81ff>1</span>.<span style=color:#ae81ff>0</span>.mysql.<span style=color:#66d9ef>sql</span>
</span></span></code></pre></div></li><li><p>Execute the below commands for creating hive related directories in hadoop hdfs</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hdfs dfs -mkdir /user/
</span></span><span style=display:flex><span>hdfs dfs -mkdir /user/hive
</span></span><span style=display:flex><span>hdfs dfs -mkdir /user/hive/warehouse
</span></span><span style=display:flex><span>hdfs dfs -mkdir /tmp
</span></span><span style=display:flex><span>hdfs dfs -chmod g+w /tmp
</span></span><span style=display:flex><span>hdfs dfs -chmod g+w /user/hive/warehouse
</span></span></code></pre></div></li><li><p>Add below content to .bashrc</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export HIVE_HOME<span style=color:#f92672>=</span>$PACKAGES/hive
</span></span><span style=display:flex><span>export PATH<span style=color:#f92672>=</span>$PATH:$HIVE_HOME/bin
</span></span></code></pre></div></li><li><p>Add mysql driver</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd $HOME/packages/hive/lib
</span></span><span style=display:flex><span>wget https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.27/mysql-connector-java-8.0.27.jar
</span></span></code></pre></div></li><li><p>To start hive, run hive server</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hive --service hiveserver2 --hiveconf hive.server2.thrift.port<span style=color:#f92672>=</span><span style=color:#ae81ff>10000</span> --hiveconf hive.server2.thrift.http.port<span style=color:#f92672>=</span><span style=color:#ae81ff>10001</span> --hiveconf hive.root.logger<span style=color:#f92672>=</span>INFO,console
</span></span></code></pre></div><p>Now you can open your hive cli by using command <code>hive</code></p></li></ol><h2 id=setup-tez>Setup tez</h2><ol><li><p>Download <a href=https://downloads.apache.org/tez/0.9.2/apache-tez-0.9.2-bin.tar.gz target=_blank rel="noopener nofollow">Tez binary</a> and extract to packages/tez</p></li><li><p>In packages/tez/conf directory create file tez-site.xml and put the below content</p><p><strong><code>tez-site.xml</code></strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; ?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;?xml-stylesheet type=&#34;text/xsl&#34; href=&#34;configuration.xsl&#34; ?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;configuration&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>tez.lib.uris<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>hdfs://hostname:9000/user/tez/share/tez.tar.gz<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;type&gt;</span>string<span style=color:#f92672>&lt;/type&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>tez.tez-ui.history-url.base<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>http://hostname:8080<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>yarn.timeline-service.enabled<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>true<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>tez.session.am.dag.submit.timeout.secs<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>2<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;name&gt;</span>tez.history.logging.service.class<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>&lt;value&gt;</span>org.apache.tez.dag.history.logging.ats.ATSHistoryLoggingService<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/configuration&gt;</span>
</span></span></code></pre></div><p>Upload tez files in hdfs</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hdfs dfs -mkdir /user/tez
</span></span><span style=display:flex><span>hdfs dfs -chmod g+w /user/tez
</span></span><span style=display:flex><span>cd $HOME/packages/tez
</span></span><span style=display:flex><span>hdfs dfs -put * /user/tez
</span></span></code></pre></div><p>In <code>hive-site.xml</code> add the property</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;property&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;name&gt;</span>hive.execution.engine<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;value&gt;</span>tez<span style=color:#f92672>&lt;/value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/property&gt;</span>
</span></span></code></pre></div><p>In mapred-site.xml change the property value of <code>mapreduce.framework.name</code> to <code>yarn-tez</code></p><p>Add below content to <code>.bashrc</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export TEZ_HOME<span style=color:#f92672>=</span>$PACKAGES/tez
</span></span><span style=display:flex><span>export TEZ_CONF_DIR<span style=color:#f92672>=</span>$TEZ_HOME/conf
</span></span><span style=display:flex><span>export TEZ_JARS<span style=color:#f92672>=</span>$TEZ_HOME
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># For enabling hive to use the Tez engine</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -z <span style=color:#e6db74>&#34;</span>$HIVE_AUX_JARS_PATH<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>export HIVE_AUX_JARS_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$TEZ_JARS<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>export HIVE_AUX_JARS_PATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$HIVE_AUX_JARS_PATH<span style=color:#e6db74>:</span>$TEZ_JARS<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>export HADOOP_CLASSPATH<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>TEZ_CONF_DIR<span style=color:#e6db74>}</span>:<span style=color:#e6db74>${</span>TEZ_JARS<span style=color:#e6db74>}</span>/*:<span style=color:#e6db74>${</span>TEZ_JARS<span style=color:#e6db74>}</span>/lib/*
</span></span></code></pre></div></li></ol><h3 id=to-setup-tez-ui>To setup Tez UI</h3><ol><li><p>Download jetty runner jar in tez home</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd $TEZ_HOME
</span></span><span style=display:flex><span>wget https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-runner/9.2.11.v20150529/jetty-runner-9.2.11.v20150529.jar
</span></span></code></pre></div></li><li><p>Run ui</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>java -jar jetty-runner-9.2.11.v20150529.jar tez-ui-0.9.2.war --port <span style=color:#ae81ff>8080</span>
</span></span></code></pre></div><p>Your tez Ui will be running on http://hostname:8080</p></li></ol><p>That&rsquo;s it</p></div></article></main><script async src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js defer></script></body></html>