<!doctype html><html lang=hi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto:ital,wdth,wght@0,75..100,100..900;1,75..100,100..900&display=swap" rel=stylesheet><link rel=stylesheet href=https://csetutorials.com/scss/main.min.css><title>Consistent Hashing Design and Techniques</title>
<meta name=description content="Key Points regarding implementation of Consistent Hashing"><meta name=author content="Ashish Doneriya"><meta name=robots content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><link rel=canonical href=https://csetutorials.com/consistent-hashing-design-techniques/><meta property="og:type" content="article"><meta property="og:title" content="Consistent Hashing Design and Techniques"><meta property="og:description" content="Key Points regarding implementation of Consistent Hashing"><meta property="og:url" content="https://csetutorials.com/consistent-hashing-design-techniques/"><meta property="og:site_name" content="Cse Tutorials"><meta property="article:published_time" content="2021-03-21T07:09:36+05:30"><meta property="article:modified_time" content="2021-03-21T07:09:36+05:30"><meta property="article:author" content="Ashish Doneriya"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Consistent Hashing Design and Techniques"><meta name=twitter:description content="Key Points regarding implementation of Consistent Hashing"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Consistent Hashing Design and Techniques","description":"Key Points regarding implementation of Consistent Hashing","author":{"@type":"Person","name":"Ashish Doneriya"},"keywords":[],"articleSection":["\"%!s(MISSING)\""],"datePublished":"2021-03-21T07:09:36\u002b05:30","dateModified":"2021-03-21T07:09:36\u002b05:30","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/csetutorials.com\/consistent-hashing-design-techniques\/"},"url":"https:\/\/csetutorials.com\/consistent-hashing-design-techniques\/"}</script></head><body style=background-color:#f9f9f9;font-family:roboto,sans-serif><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a class=navbar-brand href=/>Cse Tutorials</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about-us/>About us</a></li><li class=nav-item><a class=nav-link href=/contact-us/>Contact us</a></li><li class=nav-item><a class=nav-link href=/privacy-policy/>Privacy Policy</a></li><li class=nav-item><a class=nav-link href=/terms-of-service/>Terms of Service</a></li><li class=nav-item><a class=nav-link href>Topics</a></li></ul></div></div></nav><main><article class=page-wrapper><h1 class="mb-4 text-center">Consistent Hashing Design and Techniques</h1><div class="d-flex justify-content-center align-items-center mb-4 text-muted small"><time datetime="2021-03-21 07:09:36 +0530 +0530">Mar 21, 2021</time>
<span class=mx-2>|</span>
<span>Ashish Doneriya</span>
<span class=mx-2>|</span>
<a class=text-decoration-none href=/topics/system-design rel=category>System Design</a></div><div class=post-content><p>Consistent Hashing is one of the very important concept in the field of system designing. Consistent hashing is used mainly in load balancers, key-value store etc.</p><p>Lets suppose You have to create a Load Balancer for your WebApp. I presume you know what is a load balancer.</p><ul><li><p>One way is to distribute the load one by one on each server as the request comes. The problem in this approach is that if the server was storing some information in its cache or session then the cache or the session would become irrelevant if the same reqeust for that client goes to another server.</p></li><li><p>The another way is to assign reqeusts to the servers based on the below function
<code>server_number = hash_function(request_key) % total_server</code></p></li><li><p>It has a drawback. If a new server is added or removed then there would a flood of cache misses.</p></li><li><p>The solution for the above problem is <strong>Consistent Hashing</strong>.</p></li><li><p>In consistent hashing only k/n keys will be affected if a node is added or removed. Here <code>k</code> is number of keys and <code>n</code> is number of slots (you can say number of machines as for now).</p></li><li><p>Chooses any hash function, lets say we choose <code>SHA-1</code>. In this case there are 2^160 hash spaces available.</p></li><li><p>Join the first slot and the last slot and it forms a ring. Using that hash function we map servers based on their IP Addresses (or machine names) onto the ring.</p></li><li><p>We use the same hash function to map request keys to the slots.</p></li><li><p>When we have to find the server related to a particular key, then first we find the hash of that key. After that we move forward in the ring untill we found the hash of a server in that ring. That server will be the server for that key.</p></li><li><p>There are two drawbacks of this appoach. The first one is in case when a server is dropped then the whole load comes to its next server. The second drawback is it doesnot guarantee same loading in all servers.</p></li><li><p>To counter these two problem there is a technique called <strong>Virtual Nodes</strong>.</p></li><li><p>A virtual node is actually a real node. Each server is represented by multiple virtual nodes on the ring. Lets say there are 10 servers and each server has 10 virtual nodes. So in this case in the hash ring, 100 nodes are distributes. Therefore it then removes the problem of load partiality.</p></li><li><p>To find the server related to a particular key, we will calculate hash of that key and from that hash we&rsquo;ll move forward in clockwise untill a virtual node comes up in that ring.</p></li></ul></div></article></main><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js defer></script></body></html>