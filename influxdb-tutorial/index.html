<!doctype html><html lang=hi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xFIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xMIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xEIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xLIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto:ital,wdth,wght@0,75..100,100..900;1,75..100,100..900&display=swap" rel=stylesheet><link rel=stylesheet href=https://csetutorials.com/scss/main.min.css><title>Influxdb Tutorial</title>
<meta name=description content="A Simple tutorial for influx time series database."><meta name=author content="Ashish Doneriya"><meta name=robots content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><link rel=canonical href=https://csetutorials.com/influxdb-tutorial/><meta property="og:type" content="article"><meta property="og:title" content="Influxdb Tutorial"><meta property="og:description" content="A Simple tutorial for influx time series database."><meta name=keywords content="InfluxDB"><meta property="og:url" content="https://csetutorials.com/influxdb-tutorial/"><meta property="og:site_name" content="Cse Tutorials"><meta property="article:published_time" content="2016-07-06T07:55:18+05:30"><meta property="article:modified_time" content="2020-03-22T02:26:00+05:30"><meta property="article:author" content="Ashish Doneriya"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Influxdb Tutorial"><meta name=twitter:description content="A Simple tutorial for influx time series database."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Influxdb Tutorial","description":"A Simple tutorial for influx time series database.","author":{"@type":"Person","name":"Ashish Doneriya"},"keywords":["\"%!s(MISSING)\""],"articleSection":["\"%!s(MISSING)\""],"datePublished":"2016-07-06T07:55:18\u002b05:30","dateModified":"2020-03-22T02:26:00\u002b05:30","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/csetutorials.com\/influxdb-tutorial\/"},"url":"https:\/\/csetutorials.com\/influxdb-tutorial\/"}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-VQ66771MZZ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VQ66771MZZ")</script></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a class=navbar-brand href=/>Cse Tutorials</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about-us/>About us</a></li><li class=nav-item><a class=nav-link href=/contact-us/>Contact us</a></li><li class=nav-item><a class=nav-link href=/privacy-policy/>Privacy Policy</a></li><li class=nav-item><a class=nav-link href=/terms-of-service/>Terms of Service</a></li><li class=nav-item><a class=nav-link href>Topics</a></li></ul></div></div></nav><main><article class=page-wrapper><h1 class="mb-4 text-center">Influxdb Tutorial</h1><div class="d-flex justify-content-center align-items-center mb-4 text-muted small"><time datetime="2016-07-06 07:55:18 +0530 +0530">Jul 6, 2016</time>
<span class=mx-2>|</span>
<span>Ashish Doneriya</span>
<span class=mx-2>|</span>
<a class=text-decoration-none href=/topics/database rel=category>Database</a></div><div class=post-content><p>Influxdata is a platform for storing, collecting, visualizing and managing time-series data. Currently Influxdb is the most famous time series database. This article is for version 1.x only.</p><p>The following topics that I am going to cover in this article.</p><ol><li>Influxdb Installation</li><li>Databases</li><li>Inserting Data</li><li>Querying Data</li><li>Tags in influxdb</li><li>Group by time Query</li><li>Deleting measurement or data from measurement</li><li>Retention Policies</li></ol><p>In influxdb the combination of timestamp and tags is composite keys. So lets start.</p><h2 id=install-influxdb>Install Influxdb</h2><p>First of all install influxdb from its <a href=https://portal.influxdata.com/downloads/ target=_blank rel="noopener nofollow">official download page</a>. If you donot have admin rights then you can follow my article on how to install influxdb without root access.
<a href=/install-influxdb-without-root-access-linux.html>/install-influxdb-without-root-access-linux.html</a></p><p>Now open another terminal and start the CLI using command <code>influx</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span>$ influx
</span></span><span style=display:flex><span>Connected to http://localhost:8086 version 0.13.x
</span></span><span style=display:flex><span>InfluxDB shell 0.13.x
</span></span><span style=display:flex><span>&gt;
</span></span></code></pre></div><h2 id=databases>Databases</h2><p><strong>To create a database</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>create database mydb
</span></span></code></pre></div><p><strong>To view the list of all databases</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>show databases
</span></span><span style=display:flex><span>name: databases
</span></span><span style=display:flex><span>---------------
</span></span><span style=display:flex><span>name
</span></span><span style=display:flex><span>_internal
</span></span><span style=display:flex><span>mydb
</span></span></code></pre></div><p><strong>To use a particular database</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>use mydb
</span></span></code></pre></div><p><strong>To delete a particular database</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>drop database mydb
</span></span></code></pre></div><h2 id=inserting-data>Inserting Data</h2><p>In influxdb we call tables as measurements and columns as fields.</p><p>We don&rsquo;t need to define measurements(tables) and fields(columns). It will create measurements and add columns automatically when we insert data. It is also like a NoSQL database</p><p>Format for writing data is</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>measurementName field1<span style=color:#f92672>=</span>value1,field2<span style=color:#f92672>=</span>value2,field3<span style=color:#f92672>=</span>value3 timestamp
</span></span></code></pre></div><ul><li>Position of spaces and comma matters a lot.</li><li>The timestamp is in nanoseconds. If we don&rsquo;t provide timestamp it will assign the local current timestamp (in nanoseconds).</li><li>By default it assumes all the numbers as doubles. For integer value we have to append <code>i</code> at the end.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&gt; insert measurementName field4<span style=color:#f92672>=</span>12i
</span></span></code></pre></div><ul><li>String values should be in double quotes.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&gt; insert measurementName field5<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;qwqw&#34;</span>
</span></span></code></pre></div><ul><li>For boolean values use t, T, true, True, or TRUE for TRUE, and f, F, false, False, or FALSE for FALSE</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&gt; insert measurementName field6<span style=color:#f92672>=</span>T
</span></span></code></pre></div><ul><li>We can use <code>\</code> character for escaping comma, space, equal and other special character in field (field) value</li></ul><p><strong>Note :</strong> Once you write a particular field in a particular datatype, you cannot change it back.</p><p>For more details refer official <a href=https://docs.influxdata.com/influxdb/v0.13/write_protocols/write_syntax/ target=_blank rel="noopener nofollow">documentation</a></p><h2 id=querying-data>Querying Data</h2><p>To select all fields from measurement</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>select</span> * from measurementName
</span></span></code></pre></div><p>To select particular fields</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>select</span> field1, field2 from measurement
</span></span></code></pre></div><p><strong>Note :</strong> If your mesurement name or field name contains characters such as <code>.</code> <code>#</code> or <code>=</code>, then use double quotes</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#e6db74>&#34;field1.name&#34;</span>, <span style=color:#e6db74>&#34;field2.name&#34;</span> from <span style=color:#e6db74>&#34;measurement.name&#34;</span>
</span></span></code></pre></div><p>I suggest you to always use double quotes because some times influxdb doesn&rsquo;t show you values if you donot use double quotes.</p><h4 id=where-clause>Where clause</h4><p>A typical usage of where clause</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>select</span> * from measurement where field1 &gt; <span style=color:#ae81ff>12</span> and field2 <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;sparta&#39;</span> and time &gt; now<span style=color:#f92672>()</span> - 1d
</span></span></code></pre></div><p>We can also use <code>or</code> logic using separaters <code>(</code> and <code>)</code>.</p><p>Supported comaparaters in influxdb are</p><ul><li><code>=</code> equal to</li><li><code>&lt;></code> not equal to</li><li><code>!=</code> not equal to</li><li><code>></code> greater than</li><li><code>&lt;</code> less than</li><li><code>=~</code> matches against</li><li><code>!~</code> doesn’t match against</li></ul><h2 id=tags-in-influxdb>Tags in influxdb</h2><p>In the starting of the article I told you that in influxdb time is the primary key. This is wrong. The truth is In influxdb the combination of timestamp + tags is the primary key (better say composition key).</p><p><strong>What is a tag?</strong>
According to influxdb official documentation tags are used to store metadata. Let me explain in my words.</p><p>Once I had to run a group by query based on a particular field. Then I came to know that you cannot just run group by query on any field. To use group by on a particular field, there are special type of fields known as tags. Its better not to call them fields. Its just for your understanding.</p><p>There can be different values of a field (column) but for a tag, its values should be limited. Lets say I have a measurement called students. Its fields are name, age, height and its tags are gender, grade.</p><p><strong>Format for inserting row having tags in it</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>measurementName,tagKey1<span style=color:#f92672>=</span>tagValue1,tagKey2<span style=color:#f92672>=</span>tagValue2 field1<span style=color:#f92672>=</span>value1,field2<span style=color:#f92672>=</span>value2,field3<span style=color:#f92672>=</span>value3 timestamp
</span></span></code></pre></div><p>Example –</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>insert students,gender<span style=color:#f92672>=</span>male,grade<span style=color:#f92672>=</span>B age<span style=color:#f92672>=</span>23i,name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Ashish&#34;</span>,height<span style=color:#f92672>=</span>11.2
</span></span></code></pre></div><p><strong>Group by tag query example</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>select</span> * from students group by grade, gender
</span></span></code></pre></div><p>Output -</p><pre tabindex=0><code>name: students
tags: gender=male, grade=B
time			age	height	name
----			---	------	----
1584820680760917555	23	11.2	Ashish
</code></pre><h2 id=group-by-time-query>Group by time Query</h2><p>Suppose you are inserting room temperature value in influxdb for the last 24 hours at regular interval of 1 minute. Now you want to check the behaviour of room temperature that either it is increasing or decreasing.</p><p>One way is directly hitting the query <code>select temperature from stats where time > now() - 24h</code> and check all the 1440 rows ( 24 * 60).</p><p>Another way is getting the average teperature of every hour for all 24 hours. In this way we have to analyze only 24 points. So for getting the type of result we use group by time()</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#66d9ef>select</span> mean<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;temperature&#34;</span><span style=color:#f92672>)</span> from stats where time &gt; now<span style=color:#f92672>()</span> - 24h group by time<span style=color:#f92672>(</span>1h<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>You can change the aggregate function mean. There are various aggregate functions like mean, max, min, median, count, mode, distinct, sum, stddev, first, last, difference.</p><p>You can read about queries in details from <a href=https://docs.influxdata.com/influxdb/v0.13/query_language/ target=_blank rel="noopener nofollow">its website</a>.</p><h2 id=deleting-measurement-or-data-from-measurement>Deleting measurement or data from measurement</h2><p><strong>To delete a whole measurement</strong>
Syntax :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>drop measurement measurementName
</span></span></code></pre></div><p>Example -</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>drop measurement students
</span></span></code></pre></div><p><strong>To delete a specific row</strong>
In influxdb you can delete data from a measurement only on the basis on time or tags. You cannot specify field name.
Eg.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>delete from students where time <span style=color:#f92672>=</span> <span style=color:#ae81ff>1584822445492464254</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>delete from students where <span style=color:#e6db74>&#34;grade&#34;</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;B&#39;</span>
</span></span></code></pre></div><p>Here double quotes and single quote matters.</p><h2 id=retention-policies>Retention Policies</h2><p>Lets say if you want to remove data older than 1 month automatically by influxdb then retention policies are used.</p><h2 id=tips>Tips</h2><p>If you want Influx cli to show result in column or json format use these commands</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>format csv
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>format json
</span></span></code></pre></div></div></article></main><script async src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js defer></script></body></html>