<!doctype html><html lang=hi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xFIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xMIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xEIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://fonts.gstatic.com/s/roboto/v47/KFOkCnqEu92Fr1Mu51xLIzIXKMnyrYk.woff2 as=font type=font/woff2 crossorigin=anonymous><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto:ital,wdth,wght@0,75..100,100..900;1,75..100,100..900&display=swap" rel=stylesheet><link rel=stylesheet href=https://csetutorials.com/scss/main.min.css><title>Understanding Push Notifications in WhatsApp: Architecture, Flow, and Behavior</title>
<meta name=description content="Learn how WhatsApp push notifications work, including their architecture, connection with FCM/APNs, and message handling flow on your device."><meta name=author content="Ashish Doneriya"><meta name=robots content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><link rel=canonical href=https://csetutorials.com/push-notifications-whatsapp-architecture-flow.html><meta property="og:type" content="article"><meta property="og:title" content="Understanding Push Notifications in WhatsApp: Architecture, Flow, and Behavior"><meta property="og:description" content="Learn how WhatsApp push notifications work, including their architecture, connection with FCM/APNs, and message handling flow on your device."><meta property="og:url" content="https://csetutorials.com/push-notifications-whatsapp-architecture-flow.html"><meta property="og:site_name" content="Cse Tutorials"><meta property="article:published_time" content="2024-12-18T18:35:38+05:30"><meta property="article:modified_time" content="2024-12-18T18:35:38+05:30"><meta property="article:author" content="Ashish Doneriya"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Understanding Push Notifications in WhatsApp: Architecture, Flow, and Behavior"><meta name=twitter:description content="Learn how WhatsApp push notifications work, including their architecture, connection with FCM/APNs, and message handling flow on your device."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Understanding Push Notifications in WhatsApp: Architecture, Flow, and Behavior","description":"Learn how WhatsApp push notifications work, including their architecture, connection with FCM\/APNs, and message handling flow on your device.","author":{"@type":"Person","name":"Ashish Doneriya"},"keywords":[],"articleSection":["\"%!s(MISSING)\""],"datePublished":"2024-12-18T18:35:38\u002b05:30","dateModified":"2024-12-18T18:35:38\u002b05:30","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/csetutorials.com\/push-notifications-whatsapp-architecture-flow.html"},"url":"https:\/\/csetutorials.com\/push-notifications-whatsapp-architecture-flow.html"}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-VQ66771MZZ"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-VQ66771MZZ")</script></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a class=navbar-brand href=/>Cse Tutorials</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/about-us/>About us</a></li><li class=nav-item><a class=nav-link href=/contact-us/>Contact us</a></li><li class=nav-item><a class=nav-link href=/privacy-policy/>Privacy Policy</a></li><li class=nav-item><a class=nav-link href=/terms-of-service/>Terms of Service</a></li><li class=nav-item><a class=nav-link href=/topics/>Topics</a></li></ul></div></div></nav><main><article class=page-wrapper><h1 class="mb-4 text-center">Understanding Push Notifications in WhatsApp: Architecture, Flow, and Behavior</h1><div class="d-flex justify-content-center align-items-center mb-4 text-muted small"><time datetime="2024-12-18 18:35:38 +0530 +0530">Dec 18, 2024</time>
<span class=mx-2>|</span>
<span>Ashish Doneriya</span>
<span class=mx-2>|</span>
<a class=text-decoration-none href=/topics/system-design rel=category>System Design</a></div><div class=post-content><h2 id=understanding-push-notifications-architecture-and-flow>Understanding Push Notifications: Architecture and Flow</h2><p>Push notifications are a core feature in modern apps, enabling real-time communication with users. Whether it’s a messaging app like WhatsApp or a social media platform, the process involves multiple components working together seamlessly. Let’s break it down step by step.</p><h2 id=push-notification-architecture>Push Notification Architecture</h2><p>The architecture of push notifications is built around three key players:</p><ol><li><p><strong>Mobile App</strong>: The app installed on the user’s device that wants to notify the user about certain events.</p></li><li><p><strong>Push Notification Services</strong>: These services act as intermediaries between the app’s server and the user’s device. Common examples are:</p><ul><li><strong>Google Firebase Cloud Messaging (FCM)</strong>: For Android and web platforms.</li><li><strong>Apple Push Notification Service (APNs)</strong>: For iOS devices.</li></ul></li><li><p><strong>Backend Server</strong>: The server where the app’s logic resides, responsible for sending notifications to the push notification service.</p></li></ol><h2 id=persistent-connections-with-push-services>Persistent Connections with Push Services</h2><p>A critical aspect of push notifications is the persistent connection between the device and the push service. When you install an app like WhatsApp, the app registers itself with Google FCM or Apple APNs. These services maintain a lightweight, always-on connection with the user’s device.</p><p>The operating system (Android or iOS) ensures that the connection is efficient, preserving battery life and minimizing resource use. This allows the push notification service to deliver notifications to the device at any time without requiring the app itself to maintain a direct connection.</p><h2 id=push-notification-flow>Push Notification Flow</h2><p>Now, let’s look at how a push notification, such as a message on WhatsApp, flows from the sender to the recipient’s device.</p><ol><li><p><strong>WhatsApp Server Sends a Push Notification</strong></p><p>When someone sends a message, the WhatsApp server prepares a notification for the recipient. This notification contains metadata such as:</p><ul><li>The sender’s ID</li><li>A reference to the message (not the actual content, as it’s encrypted)</li><li>Other details like the message timestamp.
The server then forwards this notification to Google FCM (for Android users) or Apple APNs (for iOS users).</li></ul></li><li><p><strong>Google FCM or Apple APNs Delivers the Notification</strong></p><p>Once the push notification service (FCM/APNs) receives the request from the WhatsApp server, it delivers the notification to the recipient’s device. This step involves the persistent connection maintained between the push service and the device.</p></li><li><p><strong>Device Handles the Notification</strong></p><p>When the notification arrives on the device, the behavior depends on the state of the app:</p><ul><li><p><strong>If the app is closed:</strong></p><p>The operating system displays the notification directly (e.g., “New message received”) without the app doing anything. The actual message content is not downloaded until the user opens WhatsApp.</p></li><li><p><strong>If the app is in the background:</strong></p><p>The notification is sent to WhatsApp in the background. WhatsApp fetches the message from its server, decrypts it, and saves it in the local database. Once processed, WhatsApp updates the notification with detailed information such as the sender’s name and a message preview (e.g., “John: Hi, how are you?”).</p></li><li><p><strong>If the app is in the foreground:</strong></p><p>The notification bypasses the system notification tray and goes directly to WhatsApp. The app processes the message in real time and updates the user interface.</p></li></ul></li></ol><h2 id=key-behavior-of-whatsapp-notifications>Key Behavior of WhatsApp Notifications</h2><p>A common misconception is that WhatsApp sends different types of notifications (e.g., “data” or “notification” messages). In reality, the WhatsApp server sends a single notification containing metadata, and the device’s state determines how the notification is handled. For instance:</p><ul><li>When the app is closed, the OS displays the notification.</li><li>When the app is in the background, WhatsApp processes the notification and fetches the message.</li><li>When the app is open, WhatsApp handles everything directly without showing a system notification.</li></ul><h2 id=conclusion>Conclusion</h2><p>Push notifications are designed to efficiently deliver information to users, whether the app is open, closed, or running in the background. The persistent connection between devices and push services like Google FCM or Apple APNs ensures reliability without draining resources. In apps like WhatsApp, this system works seamlessly to fetch, decrypt, and store messages while providing users with timely notifications.</p><p>This architecture and flow make push notifications a powerful tool for modern app developers, balancing efficiency, security, and user experience.</p></div></article></main><script async src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js defer></script></body></html>